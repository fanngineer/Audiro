## DB 설계 관련 질문 정리

1. ‘선물(postcard)’, 메시지, 뮤직메이트를 mongoDB로 관리하는게 더 좋을지 

 - 꼭 mongo DB가 유리한것은 아님…

 - 그렇다면 왜 사용?? 데이터를 json 형식으로 보관, 객체안에 지저분한 형태의 객체들도 들어갈 수 있음, 게시판 - 게시글, 작성자, 작성시간, 내용, 코멘트 등을 하나의 키로 통째로 보관 가능

 - 코멘트에 또 다시 코멘트 또 다시 코멘트 → mySQL은 순환 참조,,,, → 성능 저하 → mongoDB를 이용해서 통째로 다 집어넣어서 (컬럼이 동적으로 생성될 수 있는 경우 NoSQL이 유리)

 - insert, select만 일어나는 경우 → 큰 차이는 없음…..

 - mongoDB는 키가 해쉬형태를 가지고 있다는 장점이 있음

 - 독립적인 형태로 키 보관 but Select나 검색이 있다면 관계가 있기 때문에 굳이 mongoDB보다는 mySQL이 더 좋아요~~

 - 래디스(캐쉬) → 키 밸류 구조라서 DB라서 read, write가 훨씬 빠름 (insert가 빈번하면 아주 유리)

 - 두가지 섞어서 쓰는 것도 가능 → 대부분 user로 키를 쓰면 둘 중 뭘 써도 상관없음 (어디서 들고오냐의 차이) but 서로 관계가 있으면 안된다.

 - 둘 다 쓸거면 queryDSL

 - 추상화, 메소드 단위로 질의하는게 가능

 - 키를 가지고 이거를 찾아줘 → 메소드로 호출 가능 

 - RDB, NoSQL에도 똑같이 사용할 수 있음 (=추상화, 안에 뭐가 있는지 상관없이 코드레벨에서 다르지 않게 사용 가능)

 - JPA와의 차이는? 아예 role이 다름 보통을 같이 많이 쓴다.


2. update가 필요 없는 속성과 자주 일어나는 속성을 다른 테이블로 분리하는게 좋을지

 - 매번 다른 테이블 조인 → 낭비 

3. pk는 어떤 것으로 설정해야 할까?

 - url을 pk로 설정하는 건 좋은 생각은 아님…. 나중에 바뀔 수도 있지 않을까?

4. MongoDB를 활용할때, 객체(각 노래)에 저장된 배열(노래에 해당되는 선물img 목록)에 요소를 하나씩 넣고 빼는 것이 MySQL보다 효율적인지

 - 게시글을 mongoDB에 통째로 다 넣는게 좋을듯 

 - 객체로 불러와서 수정하면 된다. 그렇게 어렵지 않아요~!

5. 서버에 저장된 사진을 키오스크에서 Path만 가지고 불러오는 과정

 - 이미지를 파일 서버에 저장해서 url 따오기…. 

6. 사용자가 키오스크에서 음악을 어떻게 골라서 엽서(선물)에 업로드 할 것인가? 미리 구현된 노래 DB에서 찾아서? api로 실시간 검색해서 노래DB를 업로드?

 - 검색 기능은 무조건 필요..

 - 리스트와 검색은 같이…………….

 - 유튜브는 30초~1분까지만 재생 가능…..

 - 수집을 해올 필요가 있음… 우리가 다 미리 DB 구성하는 방법은 좋지 않은듯.. 

7. QR 어떻게 관리할까?

 - JWT를 사용하면 좋지 않을까요? 이건 결국 문자열이라서 QR에 담기만 하면 되지 않을까?

 - user 테이블에 JWT는 저장하지 않아도 된다.. 유효기간 설정 가능, 어떤 사용자인지도 인식 가능

 - 털려도 크게 이슈가 되지 않을 수 있음 